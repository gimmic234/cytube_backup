/*
 jQuery Mousewheel 3.1.13

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license
 jQuery.selection - jQuery Plugin

 Copyright (c) 2010-2014 IWASAKI Koji (@madapaja).
 http://blog.madapaja.net/
 Under The MIT License

 Permission is hereby granted, free of charge, to any person obtaining
 a copy of this software and associated documentation files (the
 "Software"), to deal in the Software without restriction, including
 without limitation the rights to use, copy, modify, merge, publish,
 distribute, sublicense, and/or sell copies of the Software, and to
 permit persons to whom the Software is furnished to do so, subject to
 the following conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function e$jscomp$0(n,m,h){function c(e,f){if(!m[e]){if(!n[e]){var l="function"==typeof require&&require;if(!f&&l)return l(e,!0);if(a)return a(e,!0);l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l;}l=m[e]={exports:{}};n[e][0].call(l.exports,function(a){var f=n[e][1][a];return c(f?f:a)},l,l.exports,e$jscomp$0,n,m,h)}return m[e].exports}for(var a="function"==typeof require&&require,e=0;e<h.length;e++)c(h[e]);return c})({1:[function(n,m,h){(function(b){"function"===typeof define&&
define.amd?define(["jquery"],b):"object"===typeof h?m.exports=b:b(jQuery)})(function(b){function c(e){var d=e||window.event,c=f.call(arguments,1),k=0,p=0,n=0,m=0;e=b.event.fix(d);e.type="mousewheel";"detail"in d&&(p=-1*d.detail);"wheelDelta"in d&&(p=d.wheelDelta);"wheelDeltaY"in d&&(p=d.wheelDeltaY);"wheelDeltaX"in d&&(k=-1*d.wheelDeltaX);"axis"in d&&d.axis===d.HORIZONTAL_AXIS&&(k=-1*p,p=0);var h=0===p?k:p;"deltaY"in d&&(h=p=-1*d.deltaY);"deltaX"in d&&(k=d.deltaX,0===p&&(h=-1*k));if(0!==p||0!==k){if(1===
d.deltaMode){var q=b.data(this,"mousewheel-line-height");h*=q;p*=q;k*=q}else 2===d.deltaMode&&(q=b.data(this,"mousewheel-page-height"),h*=q,p*=q,k*=q);q=Math.max(Math.abs(p),Math.abs(k));if(!g||q<g)g=q,r.settings.adjustOldDeltas&&"mousewheel"===d.type&&0===q%120&&(g/=40);r.settings.adjustOldDeltas&&"mousewheel"===d.type&&0===q%120&&(h/=40,k/=40,p/=40);h=Math[1<=h?"floor":"ceil"](h/g);k=Math[1<=k?"floor":"ceil"](k/g);p=Math[1<=p?"floor":"ceil"](p/g);r.settings.normalizeOffset&&this.getBoundingClientRect&&
(d=this.getBoundingClientRect(),n=e.clientX-d.left,m=e.clientY-d.top);e.deltaX=k;e.deltaY=p;e.deltaFactor=g;e.offsetX=n;e.offsetY=m;e.deltaMode=0;c.unshift(e,h,k,p);l&&clearTimeout(l);l=setTimeout(a,200);return(b.event.dispatch||b.event.handle).apply(this,c)}}function a(){g=null}var e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],d="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],f=Array.prototype.slice,l,g;if(b.event.fixHooks)for(var k=
e.length;k;)b.event.fixHooks[e[--k]]=b.event.mouseHooks;var r=b.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var a=d.length;a;)this.addEventListener(d[--a],c,!1);else this.onmousewheel=c;b.data(this,"mousewheel-line-height",r.getLineHeight(this));b.data(this,"mousewheel-page-height",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=d.length;a;)this.removeEventListener(d[--a],c,!1);else this.onmousewheel=null;b.removeData(this,
"mousewheel-line-height");b.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){a=b(a);var f=a["offsetParent"in b.fn?"offsetParent":"parent"]();f.length||(f=b("body"));return parseInt(f.css("fontSize"),10)||parseInt(a.css("fontSize"),10)||16},getPageHeight:function(a){return b(a).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",
a)}})})},{}],2:[function(n,m,h){(function(b,c,a){var e=function(f){var b={text:"",start:0,end:0};if(!f.value)return b;try{if(c.getSelection)b.start=f.selectionStart,b.end=f.selectionEnd,b.text=f.value.slice(b.start,b.end);else if(a.selection){f.focus();var e=a.selection.createRange(),d=a.body.createTextRange();b.text=e.text;try{d.moveToElementText(f),d.setEndPoint("StartToStart",e)}catch(r){d=f.createTextRange(),d.setEndPoint("StartToStart",e)}b.start=f.value.length-d.text.length;b.end=b.start+e.text.length}}catch(r){}return b},
d={getPos:function(a){a=e(a);return{start:a.start,end:a.end}},setPos:function(a,b,e){e=this._caretMode(e);"start"===e?b.end=b.start:"end"===e&&(b.start=b.end);a.focus();try{if(a.createTextRange){var f=a.createTextRange();0<=c.navigator.userAgent.toLowerCase().indexOf("msie")&&(b.start=a.value.substr(0,b.start).replace(/\r/g,"").length,b.end=a.value.substr(0,b.end).replace(/\r/g,"").length);f.collapse(!0);f.moveStart("character",b.start);f.moveEnd("character",b.end-b.start);f.select()}else a.setSelectionRange&&
a.setSelectionRange(b.start,b.end)}catch(r){}},getText:function(a){return e(a).text},_caretMode:function(a){a=a||"keep";!1===a&&(a="end");switch(a){case "keep":case "start":case "end":break;default:a="keep"}return a},replace:function(a,d,c){var f=e(a),l=a.value,g=b(a).scrollTop(),h={start:f.start,end:f.start+d.length};a.value=l.substr(0,f.start)+d+l.substr(f.end);b(a).scrollTop(g);this.setPos(a,h,c)},insertBefore:function(a,d,c){var f=e(a),l=a.value,g=b(a).scrollTop(),h={start:f.start+d.length,end:f.end+
d.length};a.value=l.substr(0,f.start)+d+l.substr(f.start);b(a).scrollTop(g);this.setPos(a,h,c)},insertAfter:function(a,d,c){var f=e(a),l=a.value,g=b(a).scrollTop(),h={start:f.start,end:f.end};a.value=l.substr(0,f.end)+d+l.substr(f.end);b(a).scrollTop(g);this.setPos(a,h,c)}};b.extend({selection:function(e){e="text"===(e||"text").toLowerCase();try{if(c.getSelection){if(e)return c.getSelection().toString();var d=c.getSelection();if(d.getRangeAt)var f=d.getRangeAt(0);else f=a.createRange(),f.setStart(d.anchorNode,
d.anchorOffset),f.setEnd(d.focusNode,d.focusOffset);return b("<div></div>").append(f.cloneContents()).html()}if(a.selection)return e?a.selection.createRange().text:a.selection.createRange().htmlText}catch(k){}return""}});b.fn.extend({selection:function(a,b){b=b||{};switch(a){case "getPos":return d.getPos(this[0]);case "setPos":return this.each(function(){d.setPos(this,b)});case "replace":return this.each(function(){d.replace(this,b.text,b.caret)});case "insert":return this.each(function(){"before"===
b.mode?d.insertBefore(this,b.text,b.caret):d.insertAfter(this,b.text,b.caret)});default:return d.getText(this[0])}}})})(jQuery,window,window.document)},{}],3:[function(n,m,h){window.cytubeEnhanced=new window.CytubeEnhanced($("title").text(),window.cytubeEnhancedSettings?window.cytubeEnhancedSettings.language||"en":"en",window.cytubeEnhancedSettings?window.cytubeEnhancedSettings.modulesSettings||{}:{})},{}],4:[function(n,m,h){window.CytubeEnhanced=function(b,c,a){this.channelName=b;var e={},d={};this.getModule=
function(a){var b=$.Deferred(),e=1E4;(function r(){if(void 0!==d[a])b.resolve(d[a]);else{if(0>=e)throw Error("Load timeout for module "+a+".");e-=100;setTimeout(r,100)}})();return b};this.addModule=function(b,e){if(this.isModulePermitted(b)){var f=a[b]||{};d[b]=new e(this,f);d[b].settings=f}};this.configureModule=function(b,e){$.extend(!0,a[b],e)};this.isModulePermitted=function(b){return a.hasOwnProperty(b)?a[b].hasOwnProperty("enabled")?a[b].enabled:!0:!0};this.addTranslation=function(a,b){e[a]=
b};this.t=function(a){var b=a;if("en"!==c&&void 0!==e[c])if(-1!==a.indexOf("[.]")){a=a.split("[.]");b=e[c][a[0]];for(var d=1,f=a.length;d<f;d++)b=b[a[d]]}else b=e[c][a];else-1!==a.indexOf("[.]")&&(b=a.split("[.]").pop());return b};this.userConfig=new function(){this.options={};this.set=function(a,b){this.options[a]=b;window.setOpt(window.CHANNEL.name+"_config-"+a,b)};this.get=function(a){this.options.hasOwnProperty(a)||(this.options[a]=window.getOrDefault(window.CHANNEL.name+"_config-"+a,void 0));
return this.options[a]};this.toggle=function(a){var b=!this.get(a);this.set(a,b);return b}}}},{}],5:[function(n,m,h){window.cytubeEnhanced.addModule("additionalChatCommands",function(b,c){c=$.extend({},{permittedCommands:["*"]},c);this.askAnswers=["100%",b.t("qCommands[.]of course"),b.t("qCommands[.]yes"),b.t("qCommands[.]maybe"),b.t("qCommands[.]impossible"),b.t("qCommands[.]no way"),b.t("qCommands[.]don't think so"),b.t("qCommands[.]no"),"50/50",b.t("qCommands[.]fairy is busy"),b.t("qCommands[.]I regret to inform you")];
this.randomQuotes=[];this.commandsList={"!pick ":{description:b.t("chatCommands[.]random option from the list of options (!pick option1, option2, option3)"),value:function(a){a=a.replace("!pick ","").split(",");return a[Math.floor(Math.random()*a.length)].trim()}},"!time":{description:b.t("chatCommands[.]show the current time"),value:function(){var a=(new Date).getHours();10>a&&(a="0"+a);var e=(new Date).getMinutes();10>e&&(e="0"+e);return b.t("chatCommands[.]current time")+": "+a+":"+e}},"!dice":{description:b.t("chatCommands[.]throw a dice"),
value:function(){return Math.floor(5*Math.random())+1}},"!roll":{description:b.t("chatCommands[.]random number between 0 and 999"),value:function(){var a=Math.floor(1E3*Math.random());100>a?a="0"+a:10>a&&(a="00"+a);return a}},"!skip":{description:b.t("chatCommands[.]vote for the video skip"),value:function(a){window.socket.emit("voteskip");return a=b.t("chatCommands[.]you have been voted for the video skip")},isAvailable:function(){return window.hasPermission("voteskip")}},"!next":{description:b.t("chatCommands[.]play the next video"),
value:function(a){window.socket.emit("playNext");return a=b.t("chatCommands[.]the next video is playing")},isAvailable:function(){return window.hasPermission("playlistjump")}},"!bump":{description:b.t("chatCommands[.]bump the last video"),value:function(a){var e=$("#queue").find(".queue_entry").last();a=e.data("uid");e=e.find(".qe_title").html();window.socket.emit("moveMedia",{from:a,after:window.PL_CURRENT});return a=b.t("chatCommands[.]the last video was bumped")+e},isAvailable:function(){return window.hasPermission("playlistmove")}},
"!now":{description:b.t("chatCommands[.]show the current video's name"),value:function(){return b.t("chatCommands[.]now: ")+$(".queue_active a").html()}}};this.prepareMessage=function(a){for(var b in this.commandsList)if(this.commandsList.hasOwnProperty(b)&&0===a.indexOf(b)){var d=b;(-1!==c.permittedCommands.indexOf("*")||-1!==c.permittedCommands.indexOf(d))&&(this.commandsList[b].isAvailable?this.commandsList[b].isAvailable():1)&&(a=this.commandsList[b].value(a));break}return a}})},{}],6:[function(n,
m,h){n("jquery.selection");window.cytubeEnhanced.addModule("bbCodesHelper",function(b,c){var a=this;c=$.extend({},{templateButtonsOrder:["b","i","sp","code","s"],templateButtonsAnimationSpeed:150},c);0===$("#chat-controls").length&&$('<div id="chat-controls" class="">').appendTo("#chatwrap");this.handleMarkdownHelperBtnClick=function(a,b){a.hasClass("btn-default")?(a.removeClass("btn-default"),a.addClass("btn-success"),b.show(),b.children().animate({left:0},c.templateButtonsAnimationSpeed)):(a.removeClass("btn-success"),
a.addClass("btn-default"),b.children().animate({left:-b.width()},c.templateButtonsAnimationSpeed,function(){b.hide()}))};this.$markdownHelperBtn=$('<button id="markdown-helper-btn" type="button" class="btn btn-sm btn-default" title="'+b.t("markdown[.]Markdown helper")+'">').html('<i class="glyphicon glyphicon-font"></i>').on("click",function(){a.handleMarkdownHelperBtnClick($(this),a.$markdownTemplatesWrapper);b.userConfig.toggle("bb-codes-opened")});0!==$("#chat-help-btn").length?this.$markdownHelperBtn.insertBefore("#chat-help-btn"):
this.$markdownHelperBtn.appendTo("#chat-controls");this.$markdownTemplatesWrapper=$('<div class="btn-group markdown-helper-templates-wrapper">').insertAfter(this.$markdownHelperBtn).hide();b.userConfig.get("bb-codes-opened")&&this.handleMarkdownHelperBtnClick(this.$markdownHelperBtn,this.$markdownTemplatesWrapper);this.markdownTemplates={b:{text:"<b>B</b>",title:b.t("markdown[.]Bold text")},i:{text:"<i>I</i>",title:b.t("markdown[.]Cursive text")},sp:{text:"SP",title:b.t("markdown[.]Spoiler")},code:{text:"<code>CODE</code>",
title:b.t("markdown[.]Monospace")},s:{text:"<s>S</s>",title:b.t("markdown[.]Strike")}};for(var e,d=0,f=c.templateButtonsOrder.length;d<f;d++)e=c.templateButtonsOrder[d],$('<button type="button" class="btn btn-sm btn-default" title="'+this.markdownTemplates[e].title+'">').html(this.markdownTemplates[e].text).data("template",e).appendTo(this.$markdownTemplatesWrapper);this.handleMarkdown=function(a){this.markdownTemplates.hasOwnProperty(a)&&($("#chatline").selection("insert",{text:"["+a+"]",mode:"before"}),
$("#chatline").selection("insert",{text:"[/"+a+"]",mode:"after"}))};this.$markdownTemplatesWrapper.on("click","button",function(){a.handleMarkdown($(this).data("template"));return!1})})},{"jquery.selection":2}],7:[function(n,m,h){window.cytubeEnhanced.addModule("chatAvatars",function(b){window.formatChatMessage=function(c){return function(a,e){var d=c(a,e),f="big"==b.userConfig.get("avatarsMode")?"chat-avatar chat-avatar_big":"chat-avatar chat-avatar_small";null!=window.findUserlistItem(a.username)&&
""!=window.findUserlistItem(a.username).data("profile").image&&0!=b.userConfig.get("avatarsMode")&&(f=$("<img>").attr("src",window.findUserlistItem(a.username).data("profile").image).addClass(f).prependTo(d.find(".username").parent()),"big"==b.userConfig.get("avatarsMode")&&(d.find(".username").css("display","none"),f.attr("title",a.username)));return d}}(window.formatChatMessage);""!=b.userConfig.get("avatarsMode")&&$(".username").each(function(){var c=$(this).parent(),a=$(this).text().replace(/^\s+|[:]?\s+$/g,
""),e="big"==b.userConfig.get("avatarsMode")?"chat-avatar chat-avatar_big":"chat-avatar chat-avatar_small";null!=window.findUserlistItem(a)&&""!=window.findUserlistItem(a).data("profile").image&&(c=$("<img>").attr("src",window.findUserlistItem(a).data("profile").image).addClass(e).prependTo(c),"big"==b.userConfig.get("avatarsMode")&&($(this).css("display","none"),c.attr("title",a)))})})},{}],8:[function(n,m,h){window.cytubeEnhanced.addModule("chatCommandsHelp",function(b){var c=this;0===$("#chat-controls").length&&
$('<div id="chat-controls" class="">').appendTo("#chatwrap");this.commands={};this.commands[b.t("Standard commands")]={"/me":b.t("chatCommands[.]%username% action (e.g: <i>/me is dancing</i>)"),"/sp":b.t("chatCommands[.]spoiler"),"/afk":b.t('chatCommands[.]sets the "AFK" status')};b.isModulePermitted("additionalChatCommands")&&b.getModule("additionalChatCommands").done(function(a){var e={},d;for(d in a.commandsList)a.commandsList.hasOwnProperty(d)&&(a.commandsList[d].isAvailable?a.commandsList[d].isAvailable():
1)&&(e[d]=a.commandsList[d].description||"");c.commands[b.t("Extra commands")]=e});this.handleChatHelpBtn=function(a){var e=$("<div>"),d;for(d in a)if(a.hasOwnProperty(d)){$("<h3>").html(d).appendTo(e);var f=$("<ul>"),c;for(c in a[d])a[d].hasOwnProperty(c)&&$("<li>").html("<code>"+c+"</code> - "+a[d][c]+".").appendTo(f);f.appendTo(e)}b.getModule("utils").done(function(a){a.createModalWindow(b.t("The list of chat commands"),e)})};this.$chatHelpBtn=$('<button id="chat-help-btn" class="btn btn-sm btn-default">').text(b.t("Commands")).appendTo("#chat-controls").on("click",
function(){c.handleChatHelpBtn(c.commands)})})},{}],9:[function(n,m,h){window.cytubeEnhanced.addModule("chatControls",function(b,c){var a=this;c=$.extend({},{afkButton:!0,clearChatButton:!0},c);this.handleAfkBtn=function(){window.socket.emit("chatMsg",{msg:"/afk"})};this.$afkBtn=$('<span id="afk-btn" class="btn btn-sm btn-default pointer">').text(b.t("AFK")).appendTo("#chatheader").on("click",function(){a.handleAfkBtn()});this.handleAfk=function(b){b.name===window.CLIENT.name&&(b.afk?(a.$afkBtn.removeClass("afk-default"),
a.$afkBtn.addClass("afk-success")):(a.$afkBtn.addClass("afk-default"),a.$afkBtn.removeClass("afk-success")))};if(c.afkButton)window.socket.on("setAFK",function(b){a.handleAfk(b)});else this.$afkBtn.hide();this.handleClearBtn=function(){window.confirm(b.t("Are you sure, that you want to clear the chat?"))&&window.socket.emit("chatMsg",{msg:"/clear"})};this.$clearChatBtn=$('<span id="clear-chat-btn" class="btn btn-sm btn-default pointer">').text(b.t("Clear chat")).insertAfter(this.$afkBtn).on("click",
function(){a.handleClearBtn()});window.hasPermission("chatclear")||this.$clearChatBtn.hide();this.handleChatClear=function(){window.hasPermission("chatclear")&&c.clearChatButton?a.$clearChatBtn.show():a.$clearChatBtn.hide()};window.socket.on("setUserRank",function(){a.handleChatClear()})})},{}],10:[function(n,m,h){window.cytubeEnhanced.addModule("favouritePictures",function(b){var c=this;0===$("#chat-panel").length&&$('<div id="chat-panel" class="row">').insertAfter("#main");0===$("#chat-controls").length&&
$('<div id="chat-controls" class="">').appendTo("#chatwrap");this.$toggleFavouritePicturesPanelBtn=$('<button id="favourite-pictures-btn" class="btn btn-sm btn-default" title="'+b.t("favPics[.]Show your favorite images")+'">').html('<i class="glyphicon glyphicon-th"></i>');0!==$("#smiles-btn").length?this.$toggleFavouritePicturesPanelBtn.insertAfter("#smiles-btn"):this.$toggleFavouritePicturesPanelBtn.prependTo("#chat-controls");this.$favouritePicturesPanel=$('<div id="favourite-pictures-panel" class="section">').appendTo("#chat-panel").hide();
this.$favouritePicturesPanelRow=$('<div class="favourite-pictures-panel-row">').appendTo(this.$favouritePicturesPanel);this.$favouritePicturesTrash=$('<div id="pictures-trash" title="'+b.t("favPics[.]Drop the picture here to remove it")+'">').append('<i class="pictures-trash-icon glyphicon glyphicon-trash">').appendTo(this.$favouritePicturesPanelRow);this.$favouritePicturesBodyPanel=$('<div id="pictures-body-panel">').appendTo(this.$favouritePicturesPanelRow);this.$favouritePicturesControlPanel=$('<div id="pictures-control-panel" class="row">').appendTo(this.$favouritePicturesPanel);
this.$favouritePicturesControlPanelForm=$('<div class="col-md-12">').html('<div class="input-group"><span class="input-group-btn"><button id="help-pictures-btn" class="btn btn-sm btn-default" style="border-radius:0;" type="button">?</button></span><span class="input-group-btn"><button id="export-pictures" class="btn btn-sm btn-default" style="border-radius:0;" type="button">'+b.t("favPics[.]Export pictures")+'</button></span><span class="input-group-btn"><label for="import-pictures" class="btn btn-sm btn-default" style="border-radius:0;">'+
b.t("favPics[.]Import pictures")+'</label><input type="file" style="display:none;" id="import-pictures" name="pictures-import"></span><input type="text" id="picture-address" class="form-control input-sm" placeholder="'+b.t("favPics[.]Paste picture url here")+'"><span class="input-group-btn"><button id="add-picture-btn" class="btn btn-sm btn-default" style="border-radius:0;" type="button">'+b.t("favPics[.]Add")+"</button></span></div>").appendTo(this.$favouritePicturesControlPanel);this.entityMap=
{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};this.replaceUnsafeSymbol=function(a){return c.entityMap[a]};this.renderFavouritePictures=function(){var a=JSON.parse(window.localStorage.getItem("favouritePictures")||"[]")||[];this.$favouritePicturesBodyPanel.empty();for(var b=0,d=a.length;b<d;b++){var f=a[b].replace(/[&<>"']/g,this.replaceUnsafeSymbol);$('<img class="favourite-picture-on-panel">').attr({src:f}).appendTo(this.$favouritePicturesBodyPanel)}};this.insertFavouritePicture=function(a){b.getModule("utils").done(function(b){b.addMessageToChatInput(" "+
a+" ","end")})};$(document.body).on("click",".favourite-picture-on-panel",function(){c.insertFavouritePicture($(this).attr("src"))});this.handleFavouritePicturesPanel=function(a){var b=this.smilesAndPicturesTogether||!1;0===$("#smiles-panel").length||b||$("#smiles-panel").hide();this.$favouritePicturesPanel.toggle();b||(a.hasClass("btn-default")?(0!==$("#smiles-btn").length&&$("#smiles-btn").hasClass("btn-success")&&($("#smiles-btn").removeClass("btn-success"),$("#smiles-btn").addClass("btn-default")),
a.removeClass("btn-default"),a.addClass("btn-success")):(a.removeClass("btn-success"),a.addClass("btn-default")))};this.$toggleFavouritePicturesPanelBtn.on("click",function(){c.handleFavouritePicturesPanel($(this))});this.addFavouritePicture=function(a){if(""!==a){var e=JSON.parse(window.localStorage.getItem("favouritePictures")||"[]")||[];if(-1===e.indexOf(a))""!==a&&e.push(a);else return window.makeAlert(b.t("favPics[.]The image already exists")).prependTo(this.$favouritePicturesBodyPanel),$("#picture-address").val(""),
!1;$("#picture-address").val("");window.localStorage.setItem("favouritePictures",JSON.stringify(e));this.renderFavouritePictures()}};$("#add-picture-btn").on("click",function(a){a.preventDefault();c.addFavouritePicture($("#picture-address").val().trim())});$(document.getElementById("picture-address")).on("keypress",function(a){a.preventDefault();13==a.which&&c.addFavouritePicture($("#picture-address").val().trim())});this.showHelp=function(){var a,e=$('<div class="help-pictures-content">');e.append($("<p>"+
b.t("favPics[.]<p>Favourite pictures feature if for saving favourite pictures like browser bookmarks.</p><p>Features:<ul><li><strong>Only links to images can be saved</strong>, so if image from link was removed, it also removes from your panel.</li><li>Images links are storing in browser. There are export and import buttons to share them between browsers.</li><li>Images are the same for site channels, but <strong>they are different for http:// and https://</strong></li></ul></p>")+"</p>"));var d=
$('<button type="button" id="help-pictures-exit-btn" class="btn btn-info">'+b.t("favPics[.]Exit")+"</button>").on("click",function(){a.modal("hide")}),f=$('<div class="help-pictures-footer">');f.append(d);b.getModule("utils").done(function(d){a=d.createModalWindow(b.t("Help"),e,f)});return a};$(document.getElementById("help-pictures-btn")).on("click",function(a){a.preventDefault();c.showHelp()});this.exportPictures=function(){var a=$("<a>").attr({href:"data:text/plain;charset=utf-8,"+encodeURIComponent(window.localStorage.getItem("favouritePictures")||
JSON.stringify([])),download:"cytube_enhanced_favourite_images.txt"}).hide().appendTo($(document.body));a[0].click();a.remove()};$("#export-pictures").on("click",function(){c.exportPictures()});this.importPictures=function(a){var b=new FileReader;b.addEventListener("load",function(a){window.localStorage.setItem("favouritePictures",a.target.result);c.renderFavouritePictures()});b.readAsText(a)};$(document.getElementById("import-pictures")).on("change",function(){c.importPictures($(this)[0].files[0])});
this.renderFavouritePictures();this.$favouritePicturesBodyPanel.sortable({containment:this.$favouritePicturesPanelRow,revert:!0,update:function(a,b){var d=$(b.item).attr("src"),e=$(b.item).next().attr("src"),c=JSON.parse(window.localStorage.getItem("favouritePictures")||"[]")||[],g;-1!==(g=c.indexOf(d))&&c.splice(g,1);if("undefined"!==typeof e){var k;-1!==(k=c.indexOf(e))&&c.splice(k,0,d)}else c.push(d);window.localStorage.setItem("favouritePictures",JSON.stringify(c))}});this.$favouritePicturesTrash.droppable({accept:".favourite-picture-on-panel",
hoverClass:"favourite-picture-drop-hover",drop:function(a,b){var d=$(b.draggable).attr("src"),e=JSON.parse(window.localStorage.getItem("favouritePictures")||"[]")||[];-1!==(d=e.indexOf(d))&&(e.splice(d,1),window.localStorage.setItem("favouritePictures",JSON.stringify(e)));$(b.draggable).remove()}})})},{}],11:[function(n,m,h){n("jquery-mousewheel")($);window.cytubeEnhanced.addModule("imagePreview",function(b,c){var a=this;c=$.extend({},{selectorsToPreview:".chat-picture",zoom:.15},c);this.showPicturePreview=
function(a){if($(a).is(c.selectorsToPreview)){var b=$('<img src="'+$(a).attr("src")+'">');b.ready(function(){$('<div id="modal-picture-overlay">').appendTo($(document.body));var a=$('<div id="modal-picture">').appendTo($(document.body)).draggable(),d=b.prop("width"),e=b.prop("height"),c=$('<div id="modal-picture-options">');a.append($('<div id="modal-picture-options-wrapper">').append(c));$('<a href="'+b.prop("src")+'" target="_blank" class="btn btn-sm btn-default" style="width:40px;"><i class="glyphicon glyphicon-eye-open"></i></button>').appendTo(c);
$('<a href="https://www.google.com/searchbyimage?image_url='+b.prop("src")+'" target="_blank" class="btn btn-sm btn-default" style="width:40px;"><i class="glyphicon glyphicon-search"></i></button>').appendTo(c);c=1;d>document.documentElement.clientWidth&&e>document.documentElement.clientHeight?c=e-document.documentElement.clientHeight>d-document.documentElement.clientWidth?e/(.8*document.documentElement.clientHeight):d/(.8*document.documentElement.clientWidth):e>document.documentElement.clientHeight?
c=e/(.8*document.documentElement.clientHeight):d>document.documentElement.clientWidth&&(c=d/(.8*document.documentElement.clientWidth));e/=c;d/=c;a.css({width:d,height:e,marginLeft:-(d/2),marginTop:-(e/2)});b.appendTo(a)})}};$(document.body).on("click",function(b){a.showPicturePreview(b.target)});this.handleModalPictureMouseWheel=function(a){var b=parseInt($("#modal-picture").css("width"),10),e=parseInt($("#modal-picture").css("height"),10),l=parseInt($("#modal-picture").css("marginLeft"),10),g=parseInt($("#modal-picture").css("marginTop"),
10);0<a.deltaY?$("#modal-picture").css({width:b*(1+c.zoom),height:e*(1+c.zoom),marginLeft:l+-b*c.zoom/2,marginTop:g+-e*c.zoom/2}):$("#modal-picture").css({width:b*(1-c.zoom),height:e*(1-c.zoom),marginLeft:l+b*c.zoom/2,marginTop:g+e*c.zoom/2})};$(document.body).on("mousewheel","#modal-picture",function(b){a.handleModalPictureMouseWheel(b);return!1});this.closePictureByClick=function(){$("#modal-picture-overlay").remove();$("#modal-picture").remove()};$(document.body).on("click","#modal-picture-overlay, #modal-picture",
function(){a.closePictureByClick()});this.closePictureByEscape=function(a){27===a.which&&0!==$("#modal-picture").length&&($("#modal-picture-overlay").remove(),$("#modal-picture").remove())};$(document.body).on("keydown",function(b){a.closePictureByEscape(b)})})},{"jquery-mousewheel":1}],12:[function(n,m,h){window.cytubeEnhanced.addModule("navMenuTabs",function(b){var c=this;this.addTabInput=function(a,e,d){e=e||"";d=d||"";a=$('<div class="row tab-option-wrapper">').appendTo(a);var c=$('<div class="col-sm-4 col-md-3">').appendTo(a);
c=$('<div class="form-group">').appendTo(c);$('<input name="title" type="text" class="form-control" placeholder="'+b.t("tabs[.]Title")+'">').val(e).appendTo(c);e=$('<div class="col-sm-8 col-md-9">').appendTo(a);e=$('<div class="form-group">').appendTo(e);$('<input name="content" type="text" class="form-control" placeholder="'+b.t("tabs[.]Content")+'">').val(d).appendTo(e)};this.tabsConfigToHtml=function(a,b){var d=$("<div>");void 0!==a&&""!==a&&$('<div id="motd-channel-description">').html(a).appendTo(d);
if(0!==b.length){var e=$('<div id="motd-tabs-wrapper">').appendTo(d),c=$('<div id="motd-tabs">').appendTo(e);e=$('<div id="motd-tabs-content">').appendTo(e);for(var g=0,k=b.length;g<k;g++)if(0===b[g][0].indexOf("!dropdown!")){var h=$('<div class="btn-group">');$('<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">').html(b[g][0].replace("!dropdown!","")+' <span class="caret"></span>').appendTo(h);for(var p=$('<ul class="dropdown-menu">').appendTo(h),
n=b[g][1],m=0,t=b[g][1].length;m<t;m++){var u=$("<a>").attr({href:n[m][1],target:"_blank"}).text(n[m][0]);$("<li>").html(u).appendTo(p)}h.appendTo(c)}else $('<button class="btn btn-default motd-tab-btn" data-tab-index="'+g+'">').html(b[g][0]).appendTo(c),$('<div class="motd-tab-content" data-tab-index="'+g+'">').hide().html(b[g][1]).appendTo(e)}return d.html()};this.tabsHtmlToCondig=function(a){this.$tabsArea.empty();a=$("<div>").html(a);var b=a.find("#motd-tabs").children(),d=a.find("#motd-tabs-content");
$("#channel-description-input").val(a.find("#motd-channel-description").html());b.each(function(){if($(this).hasClass("btn-group")){var a="";$(this).children("ul").children().each(function(){var b=$(this).children("a");a+="[n]"+b.text()+"[/n][a]"+b.attr("href")+"[/a], "});a=a.slice(0,-2);c.addTabInput(c.$tabsArea,"!dropdown!"+$(this).children("button").html().replace(' <span class="caret"></span>',""),a)}else c.addTabInput(c.$tabsArea,$(this).html(),d.find('[data-tab-index="'+$(this).data("tabIndex")+
'"]').html())})};this.motdCutMap={"<iframe $1>$2</iframe>":/\[iframe(.*?)\](.*?)[/iframe]]/g};this.fixMotdCut=function(){$(document.getElementById("motd-tabs-content")).find(".motd-tab-content").each(function(){for(var a in c.motdCutMap)c.motdCutMap.hasOwnProperty(a)&&$(this).html($(this).html().replace(c.motdCutMap[a],a))})};this.$tabSettingsBtn=$('<button type="button" class="btn btn-primary motd-bottom-btn" id="show-tabs-settings">').text(b.t("tabs[.]Show tabs settings (cytube enhanced)")).appendTo("#cs-motdeditor").on("click",
function(){$(this).hasClass("btn-primary")?(c.$tabsSettings.show(),$(this).removeClass("btn-primary"),$(this).addClass("btn-success")):(c.$tabsSettings.hide(),$(this).removeClass("btn-success"),$(this).addClass("btn-primary"))});this.$tabsSettings=$('<div id="tabs-settings">').html("<hr><h3>"+b.t("tabs[.]Tabs settings")+"</h3>").insertBefore("#cs-motdtext").hide();$("#cs-motdtext").before("<hr>");this.$channelDescriptionInputWrapper=$('<div class="form-group">').appendTo(this.$tabsSettings);this.$channelDescriptionLabel=
$('<label for="channel-description-input">'+b.t("tabs[.]Channel description")+"</label>").appendTo(this.$channelDescriptionInputWrapper);this.$channelDescriptionInput=$('<input id="channel-description-input" placeholder="'+b.t("tabs[.]Channel description")+'" class="form-control">').appendTo(this.$channelDescriptionInputWrapper);this.$tabsArea=$('<div id="tabs-settings-area">').appendTo(this.$tabsSettings);$("<p></p>").insertBefore(this.$tabsArea);this.$addTabToTabsSettingsBtn=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-add">').text(b.t("tabs[.]Add tab")).appendTo(this.$tabsSettings).on("click",
function(){c.addTabInput(c.$tabsArea)});this.$removeLastTabFromTabsSettingsBtn=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-remove">').text(b.t("tabs[.]Remove the last tab")).appendTo(this.$tabsSettings).on("click",function(){c.$tabsArea.children(".tab-option-wrapper").last().remove()});this.$tabsToHtml=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-to-html">').text(b.t("tabs[.]Convert to the editor's code")).appendTo(this.$tabsSettings).on("click",
function(){if(window.confirm(b.t("tabs[.]The code in the editor will be replaced with the new code, continue?"))){var a=[];c.$tabsArea.find(".tab-option-wrapper").each(function(){var e=$(this).find('input[name="title"]').val().trim(),d=$(this).find('input[name="content"]').val().trim();if(0===e.indexOf("!dropdown!")){if(!/^(?:\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\][ ]*,[ ]*)*\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\]$/.test(d)){window.alert(b.t("tabs[.]Wrong content for the dropdown")+e.replace("!dropdown!","")+
".");return}d=d.split(",").map(function(a){a=a.trim().match(/^\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\]$/);return[a[1].trim(),a[2].trim()]})}a.push([e,d])});$("#cs-motdtext").val(c.tabsConfigToHtml(c.$channelDescriptionInput.val(),a))}});this.$htmlToTabs=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-from-html">').text(b.t("tabs[.]Convert from the editor's code")).appendTo(this.$tabsSettings).on("click",function(){c.tabsHtmlToCondig($("#cs-motdtext").val())});this.showMotdTab=
function(a){var b=$("#motd-tabs-content").find('[data-tab-index="'+a.data("tabIndex")+'"]');a.hasClass("btn-default")?($(".motd-tab-content").hide(),b.show(),$(".motd-tab-btn").removeClass("btn-success"),$(".motd-tab-btn").addClass("btn-default"),a.removeClass("btn-default"),a.addClass("btn-success")):(b.hide(),a.removeClass("btn-success"),a.addClass("btn-default"))};$(document.body).on("click","#motd-tabs .motd-tab-btn",function(){c.showMotdTab($(this))});this.motdHandleDropdown=function(){$(".motd-tab-btn").removeClass("btn-success");
$(".motd-tab-btn").addClass("btn-default");$(".motd-tab-content").hide()};$(document.body).on("click","#motd-tabs .dropdown-toggle",function(){c.motdHandleDropdown()});this.tabsHtmlToCondig($("#cs-motdtext").val());this.fixMotdCut();window.socket.on("setMotd",function(){c.fixMotdCut()})})},{}],13:[function(n,m,h){window.cytubeEnhanced.addModule("pmHistory",function(b){var c=this;window.socket.on("chatMsg",function(a){if(window.CLIENT.name&&-1!=a.msg.toLowerCase().indexOf(window.CLIENT.name.toLowerCase())){var e=
JSON.parse(b.userConfig.get("pmHistory")||"[]")||[];$.isArray(e)||(e=[]);50<=e.length&&e.slice(0,49);e.unshift({username:a.username.replace(/[^\w-]/g,"\\$"),msg:a.msg,time:a.time});b.userConfig.set("pmHistory",JSON.stringify(e))}});this.formatHistoryMessage=function(a){var b=$('<div class="pm-history-message">'),d=new Date(a.time),c=d.getDate();c=10>c?"0"+c:c;var l=d.getMonth();l=10>l?"0"+l:l;var g=d.getFullYear(),k=d.getHours();k=10>k?"0"+k:k;var h=d.getMinutes();h=10>h?"0"+h:h;d=d.getSeconds();
b.append($('<div class="pm-history-message-time">['+(c+"."+l+"."+g+" "+k+":"+h+":"+(10>d?"0"+d:d))+"]</div>"));b.append($('<div class="pm-history-message-username">'+a.username+"</div>"));b.append($('<div class="pm-history-message-content">'+a.msg+"</div>"));return b};this.showChatHistory=function(){var a,e=JSON.parse(b.userConfig.get("pmHistory")||"[]")||[];$.isArray(e)||(e=[]);for(var d=$('<div class="pm-history-content">'),f=0,l=e.length;f<l;f++)d.append(c.formatHistoryMessage(e[f]));e=$('<button type="button" id="pm-history-reset-btn" class="btn btn-danger">'+
b.t("pmHistory[.]Reset history")+"</button>").on("click",function(){window.confirm("pmHistory[.]Are you sure, that you want to clear messages history?")&&c.resetChatHistory(a)});f=$('<button type="button" id="pm-history-exit-btn" class="btn btn-info">'+b.t("pmHistory[.]Exit")+"</button>").on("click",function(){a.modal("hide")});var g=$('<div class="pm-history-footer">');g.append(e);g.append(f);b.getModule("utils").done(function(e){a=e.createModalWindow(b.t("pmHistory[.]Chat history"),d,g)})};this.$showChatHistoryBtn=
$('<span id="pm-history-btn" class="btn btn-sm btn-default pointer">').text(b.t("pmHistory[.]History")).appendTo("#chatheader").on("click",function(){c.showChatHistory()});this.resetChatHistory=function(a){b.userConfig.set("pmHistory",JSON.stringify([]));null!=a&&a.modal("hide")}})},{}],14:[function(n,m,h){window.cytubeEnhanced.addModule("showVideoInfo",function(b){var c=this;this.$titleRow=$('<div id="titlerow" class="row">').insertBefore("#main");this.$titleRowOuter=$('<div id="titlerow-outer" class="col-md-12" />').html($("#currenttitle").text(""!==
$(".queue_active a").text()?$("#currenttitle").text().replace(/^Currently Playing:/,b.t("videoInfo[.]Now:")):"").detach()).appendTo(this.$titleRow);this.$mediaInfo=$('<p id="mediainfo">').prependTo("#videowrap");this.showPlaylistInfo=function(){0!==$(".queue_active").length?($("#currenttitle").text($("#currenttitle").text().replace(/^Currently Playing:/,b.t("videoInfo[.]Now:"))),this.$mediaInfo.text($(".queue_active").attr("title").replace("Added by",b.t("videoInfo[.]Added by")))):($("#currenttitle").text(""),
this.$mediaInfo.text(b.t("videoInfo[.]Nothing is playing now")))};this.showPlaylistInfo();window.socket.on("changeMedia",function(){c.showPlaylistInfo()})})},{}],15:[function(n,m,h){window.cytubeEnhanced.addModule("smiles",function(b){var c=this;0===$("#chat-panel").length&&$('<div id="chat-panel" class="row">').insertAfter("#main");0===$("#chat-controls").length&&$('<div id="chat-controls" class="">').appendTo("#chatwrap");$("#emotelistbtn").hide();this.$smilesBtn=$('<button id="smiles-btn" class="btn btn-sm btn-default" title="'+
b.t("emotes[.]Show emotes")+'">').html('<i class="glyphicon glyphicon-picture"></i>').prependTo("#chat-controls");this.$smilesPanel=$('<div id="smiles-panel" class="section">').prependTo("#chat-panel").hide();this.renderSmiles=function(){for(var a=window.CHANNEL.emotes,b=0,d=a.length;b<d;b++)$('<img class="smile-on-panel">').attr({src:a[b].image}).data("name",a[b].name).appendTo(this.$smilesPanel)};this.insertSmile=function(a){b.getModule("utils").done(function(b){b.addMessageToChatInput(" "+a+" ",
"end")})};$(document.body).on("click",".smile-on-panel",function(){c.insertSmile($(this).data("name"))});this.handleSmileBtn=function(a){var b=this.smilesAndPicturesTogether||!1;0===$("#favourite-pictures-panel").length||b||$("#favourite-pictures-panel").hide();this.$smilesPanel.toggle();b||(a.hasClass("btn-default")?(0!==$("#favourite-pictures-btn").length&&$("#favourite-pictures-btn").hasClass("btn-success")&&($("#favourite-pictures-btn").removeClass("btn-success"),$("#favourite-pictures-btn").addClass("btn-default")),
a.removeClass("btn-default"),a.addClass("btn-success")):(a.removeClass("btn-success"),a.addClass("btn-default")))};this.$smilesBtn.on("click",function(){c.handleSmileBtn($(this))});this.renderSmiles()})},{}],16:[function(n,m,h){window.cytubeEnhanced.addModule("userControlPanel",function(b,c){var a=this;c=$.extend({},{layoutConfigButton:!1,smilesAndPicturesTogetherButton:!1,minimizeButton:!1},c);this.$configWrapper=$('<div id="config-wrapper" class="col-lg-12 col-md-12">').appendTo("#leftpane-inner");
b.userConfig.get("hide-config-panel")||this.$configWrapper.show();this.$configBody=$('<div id="config-body" class="well form-horizontal">').appendTo(this.$configWrapper);this.handleConfigBtn=function(){b.userConfig.toggle("hide-config-panel");this.$configWrapper.toggle()};this.$configBtn=$('<button id="layout-btn" class="btn btn-sm btn-default pull-right">').html('<span class="glyphicon glyphicon-cog"></span> '+b.t("userConfig[.]Settings")).appendTo("#leftcontrols").on("click",function(){a.handleConfigBtn()});
this.$layoutForm=$('<div id="layout-config-form" class="form-group">').appendTo(this.$configBody).append($('<div class="col-lg-3 col-md-3 control-label">'+b.t("userConfig[.]Layout")+"</div>"));this.$layoutWrapper=$('<div id="layout-config-wrapper" class="col-lg-9 col-md-9 text-center">').appendTo(this.$layoutForm);this.$layoutBtnWrapper=$('<div id="layout-config-btn-wrapper" class="btn-group">').appendTo(this.$layoutWrapper);c.layoutConfigButton||c.minimizeButton||this.$layoutForm.hide();this.layoutOptions=
{"hide-header":{title:b.t("userConfig[.]Hide header"),"default":"no",values:{yes:b.t("userConfig[.]Yes"),no:b.t("userConfig[.]No")}},"player-position":{title:b.t("userConfig[.]Player position"),"default":"right",values:{left:b.t("userConfig[.]Left"),right:b.t("userConfig[.]Right"),center:b.t("userConfig[.]Center")}},"playlist-position":{title:b.t("userConfig[.]Playlist position"),"default":"right",values:{left:b.t("userConfig[.]Left"),right:b.t("userConfig[.]Right")}},"userlist-position":{title:b.t("userConfig[.]Chat's userlist position"),
"default":"left",values:{left:b.t("userConfig[.]Left"),right:b.t("userConfig[.]Right")}}};this.configUserLayout=function(d){var e=$('<div class="form-horizontal">');for(k in this.layoutOptions)if(this.layoutOptions.hasOwnProperty(k)){var c=$('<div class="form-group">').appendTo(e);$('<label for="'+k+'" class="col-sm-2 control-label">'+this.layoutOptions[k].title+"</label>").appendTo(c);c=$('<div class="col-sm-10">').appendTo(c);c=$('<select id="'+k+'" class="form-control">').appendTo(c);for(var g in this.layoutOptions[k].values)this.layoutOptions[k].values.hasOwnProperty(g)&&
$('<option value="'+g+'">'+this.layoutOptions[k].values[g]+"</option>").appendTo(c);d.hasOwnProperty(k)?c.val(d[k]):c.val(this.layoutOptions[k]["default"])}var k=$('<div class="form-group">').appendTo(e);$('<label for="user-css" class="col-sm-2 control-label">'+b.t("userConfig[.]User CSS")+"</label>").appendTo(k);k=$('<div class="col-sm-10">').appendTo(k);$('<textarea id="user-css" class="form-control" rows="7">').appendTo(k).val(d["user-css"]||"");var h=$("<div>");$('<button type="button" id="cancel-user-layout" class="btn btn-info" data-dismiss="modal">'+
b.t("userConfig[.]Cancel")+"</button>").appendTo(h);$('<button type="button" id="reset-user-layout" class="btn btn-danger">'+b.t("userConfig[.]Reset settings")+"</button>").appendTo(h).on("click",function(){if(window.confirm(b.t("userConfig[.]All the settings including user css will be reset, continue?"))){for(var e in a.layoutOptions)a.layoutOptions.hasOwnProperty(e)&&(d[e]=a.layoutOptions[e]["default"]);d["user-css"]="";b.userConfig.set("layout",JSON.stringify(d));a.applyLayoutSettings(d);p.modal("hide")}});
$('<button type="button" id="save-user-layout" class="btn btn-success">').text(b.t("userConfig[.]Save")).appendTo(h).on("click",function(){for(var e in a.layoutOptions)a.layoutOptions.hasOwnProperty(e)&&(0!==$("#"+e).length?d[e]=$("#"+e).val():d[e]=a.layoutOptions[e]["default"]);0!==$("#user-css").length?d["user-css"]=$("#user-css").val():d["user-css"]="";b.userConfig.set("layout",JSON.stringify(d));a.applyLayoutSettings(d);p.modal("hide")});var p;b.getModule("utils").done(function(a){p=a.createModalWindow(b.t("userConfig[.]Layout settings"),
e,h)})};this.applyLayoutSettings=function(a){"yes"===a["hide-header"]?($("#motdrow").hide(),$("#motdrow").data("hiddenByLayout","1")):("1"!==$("#motdrow").data("hiddenByMinimize")&&$("#motdrow").show(),$("#motdrow").data("hiddenByLayout","0"));"left"===a["player-position"]?($("#chatwrap").hasClass("col-md-10 col-md-offset-1")&&($("#chatwrap").removeClass("col-md-10 col-md-offset-1"),$("#chatwrap").addClass("col-lg-5 col-md-5")),$("#videowrap").hasClass("col-md-10 col-md-offset-1")&&($("#videowrap").removeClass("col-md-10 col-md-offset-1"),
$("#videowrap").addClass("col-lg-7 col-md-7")),$("#videowrap").detach().insertBefore($("#chatwrap"))):"center"===a["player-position"]?($("#chatwrap").removeClass(function(a,b){return(b.match(/(\s)*col-(\S)+/g)||[]).join("")}),$("#videowrap").removeClass(function(a,b){return(b.match(/(\s)*col-(\S)+/g)||[]).join("")}),$("#chatwrap").addClass("col-md-10 col-md-offset-1"),$("#videowrap").addClass("col-md-10 col-md-offset-1"),$("#videowrap").detach().insertBefore($("#chatwrap"))):($("#chatwrap").hasClass("col-md-10 col-md-offset-1")&&
($("#chatwrap").removeClass("col-md-10 col-md-offset-1"),$("#chatwrap").addClass("col-lg-5 col-md-5")),$("#videowrap").hasClass("col-md-10 col-md-offset-1")&&($("#videowrap").removeClass("col-md-10 col-md-offset-1"),$("#videowrap").addClass("col-lg-7 col-md-7")));"left"===a["playlist-position"]?($("#rightcontrols").detach().insertBefore($("#leftcontrols")),$("#rightpane").detach().insertBefore($("#leftpane"))):($("#leftcontrols").detach().insertBefore($("#rightcontrols")),$("#leftpane").detach().insertBefore($("#rightpane")));
"right"===a["userlist-position"]?$("#userlist").addClass("pull-right"):$("#userlist").removeClass("pull-right");a.hasOwnProperty("user-css")&&""!==a["user-css"]?$("head").append('<style id="user-style" type="text/css">'+a["user-css"]+"</style>"):0!==$("#user-style").length&&$("#user-style").remove();$("#refresh-video").click()};this.handleLayout=function(){try{var a=window.JSON.parse(b.userConfig.get("layout"))||{}}catch(f){a={}}this.configUserLayout(a)};this.$layoutConfigBtn=$('<button id="layout-configuration-btn" class="btn btn-default">').text(b.t("userConfig[.]Settings")).appendTo(this.$layoutBtnWrapper).on("click",
function(){a.handleLayout()});if(c.layoutConfigButton){try{var e=window.JSON.parse(b.userConfig.get("layout"))||{}}catch(d){e={}}this.applyLayoutSettings(e)}else this.$layoutConfigBtn.hide();this.applyMinimize=function(b){b?($("#motdrow").data("hiddenByMinimize","1"),$("#motdrow").hide(),$("#queue").parent().hide(),a.$minBtn.removeClass("btn-default"),a.$minBtn.addClass("btn-success")):("1"!==$("#motdrow").data("hiddenByLayout")&&$("#motdrow").show(),$("#motdrow").data("hiddenByMinimize","0"),$("#queue").parent().show(),
a.$minBtn.removeClass("btn-success"),a.$minBtn.addClass("btn-default"))};this.$minBtn=$('<button id="layout-min-btn" class="btn btn-default">').text(b.t("userConfig[.]Minimize")).appendTo(this.$layoutBtnWrapper).on("click",function(){a.applyMinimize(b.userConfig.toggle("isMinimized"))});c.minimizeButton?this.applyMinimize(b.userConfig.get("isMinimized")):this.$minBtn.hide();this.$commonConfigForm=$('<div id="common-config-form" class="form-group">').append($('<div class="col-lg-3 col-md-3 control-label">').text(b.t("userConfig[.]Common"))).appendTo(this.$configBody);
this.$commonConfigWrapper=$('<div id="common-config-wrapper" class="col-lg-9 col-md-9 text-center">').appendTo(this.$commonConfigForm);this.$commonConfigBtnWrapper=$('<div id="common-config-btn-wrapper" class="btn-group">').appendTo(this.$commonConfigWrapper);c.smilesAndPicturesTogetherButton&&b.isModulePermitted("smiles")&&b.isModulePermitted("favouritePictures")||this.$commonConfigForm.hide();this.applySmilesAndPictures=function(d){b.getModule("smiles").done(function(a){a.smilesAndPicturesTogether=
d});b.getModule("favouritePictures").done(function(a){a.smilesAndPicturesTogether=d});d?(a.$smilesAndPicturesBtn.removeClass("btn-default"),a.$smilesAndPicturesBtn.addClass("btn-success"),$("#smiles-btn").hide(),$("#smiles-panel").hide(),$("#smiles-btn").addClass("btn-default"),$("#smiles-btn").removeClass("btn-success"),$("#favourite-pictures-btn").hide(),$("#favourite-pictures-panel").hide(),$("#favourite-pictures-btn").addClass("btn-default"),$("#favourite-pictures-btn").removeClass("btn-success"),
$('<button id="smiles-and-picture-btn" class="btn btn-sm btn-default" title="'+b.t("userConfig[.]Show emotes and favorite images")+'">').html('<i class="glyphicon glyphicon-picture"></i> ? <i class="glyphicon glyphicon-th"></i>').prependTo($("#chat-controls")).on("click",function(){$("#smiles-btn").click();$("#favourite-pictures-btn").click();$(this).hasClass("btn-default")?($(this).removeClass("btn-default"),$(this).addClass("btn-success")):($(this).removeClass("btn-success"),$(this).addClass("btn-default"))})):
(0!==$("#smiles-and-picture-btn").length&&$("#smiles-and-picture-btn").remove(),a.$smilesAndPicturesBtn.removeClass("btn-success"),a.$smilesAndPicturesBtn.addClass("btn-default"),$("#smiles-btn").show(),$("#favourite-pictures-btn").show(),$("#smiles-panel").hide(),$("#favourite-pictures-panel").hide())};this.$smilesAndPicturesBtn=$('<button id="common-config-smiles-and-pictures-btn" class="btn btn-default">').html('<i class="glyphicon glyphicon-picture"></i> '+b.t("userConfig[.]and")+' <i class="glyphicon glyphicon-th"></i>').appendTo(a.$commonConfigBtnWrapper).on("click",
function(){a.applySmilesAndPictures(b.userConfig.toggle("smiles-and-pictures"))});c.smilesAndPicturesTogetherButton&&b.isModulePermitted("smiles")&&b.isModulePermitted("favouritePictures")?this.applySmilesAndPictures(b.userConfig.get("smiles-and-pictures")):this.$smilesAndPicturesBtn.hide();this.$avatarsForm=$('<div id="avatars-config-form" class="form-group">').appendTo(this.$configBody).append($('<div class="col-lg-3 col-md-3 control-label">'+b.t("userConfig[.]Chat avatars")+"</div>"));this.$avatarsWrapper=
$('<div id="avatars-config-wrapper" class="col-md-8 col-md-offset-1 col-lg-6 col-lg-offset-2 text-center">').appendTo(this.$avatarsForm);this.handleAvatars=function(a){b.userConfig.set("avatarsMode",a);var e=!1;$(".username").each(function(){var b=$(this).text().replace(/^\s+|[:]?\s+$/g,"");var d=$(this).parent();0===$(".chat-avatar").length&&(e=!0);if(("small"==a||"big"==a)&&e){var c="big"==a?"chat-avatar chat-avatar_big":"chat-avatar chat-avatar_small";null!=window.findUserlistItem(b)&&""!=window.findUserlistItem(b).data("profile").image&&
$("<img>").attr("src",window.findUserlistItem(b).data("profile").image).addClass(c).prependTo(d)}"big"==a?(d=d.find(".chat-avatar"),0!==d.length&&d.attr("title",b),$(this).css("display","none")):($(this).css("display","inline-block"),d=d.find(".chat-avatar"),0!==d.length&&d.removeAttr("title"))});"small"==a?$(".chat-avatar_big").removeClass("chat-avatar_big").addClass("chat-avatar_small"):"big"==a&&$(".chat-avatar_small").removeClass("chat-avatar_small").addClass("chat-avatar_big")};this.$avatarsSelect=
$('<select class="form-control">').append('<option value="">'+b.t("userConfig[.]Small")+"</option>").append('<option value="small">'+b.t("userConfig[.]Small")+"</option>").append('<option value="big">'+b.t("userConfig[.]Big")+"</option>").appendTo(this.$avatarsWrapper).on("change",function(){a.handleAvatars($(this).val())});this.$avatarsSelect.find('option[value="'+b.userConfig.get("avatarsMode")+'"]').prop("selected",!0)})},{}],17:[function(n,m,h){window.cytubeEnhanced.addModule("utils",function(b,
c){var a=this;c=$.extend({},{unfixedTopNavbar:!0,insertUsernameOnClick:!0,showScriptInfo:!0},c);window.chatTabComplete=function(){var a=$("#chatline").val().split(" "),b=a[a.length-1].toLowerCase();if(b.match(/^[\w-]{1,20}$/)){var c=Array.prototype.slice;var l=c.call($("#userlist .userlist_item")).map(function(a){return a.children[1].innerHTML}),g=c.call(l).map(function(a){return a.toLowerCase()}).filter(function(a){return 0===a.indexOf(b)});if(0!==g.length){var k=Math.min.apply(Math,g.map(function(a){return a.length}));
g=g.map(function(a){return a.substring(0,k)});for(var h=!0,p=21;h;){h=!1;var m=g[0];for(c=1;c<g.length;c++)if(g[c]!==m){h=!0;break}h&&(g=g.map(function(a){return a.substring(0,a.length-1)}));if(0>--p)break}b=g[0].substring(0,k);for(c=0;c<l.length;c++)if(l[c].toLowerCase()===b){b=l[c];break}1===g.length&&(1===a.length&&(b+=":"),b+=" ");a[a.length-1]=b;$("#chatline").val(a.join(" "))}}};this.addMessageToChatInput=function(a,b){a="begin"===(b||"end")?a+$("#chatline").val():$("#chatline").val()+a;$("#chatline").val(a).focus()};
c.insertUsernameOnClick&&($("#messagebuffer").on("click",".username",function(){a.addMessageToChatInput($(this).text(),"begin")}),$("#messagebuffer").on("click",".chat-avatar",function(){a.addMessageToChatInput($(this).parent().find(".username").text(),"begin")}));this.createModalWindow=function(a,b,c){var d=$('<div class="modal fade chat-help-modal" role="dialog" tabindex="-1">').appendTo($("body")),e=$('<div class="modal-dialog modal-lg">').appendTo(d);e=$('<div class="modal-content">').appendTo(e);
if(null!=a){var f=$('<div class="modal-header">').appendTo(e);$('<button type="button" class="close" data-dismiss="modal" aria-label="???????">').html('<span aria-hidden="true">&times;</span>').appendTo(f);$('<h3 class="modal-title">').append(a).appendTo(f)}null!=b&&$('<div class="modal-body">').append(b).appendTo(e);null!=c&&$('<div class="modal-footer">').append(c).appendTo(e);d.on("hidden.bs.modal",function(){$(this).remove()});d.modal({keyboard:!0});return d};c.unfixedTopNavbar&&$("#wrap").children(".navbar-fixed-top").removeClass("navbar-fixed-top");
setTimeout(function(){window.handleWindowResize()},3E3);setTimeout(function(){window.handleWindowResize()},1E4);window.addUserDropdown=function(a){return function(b){var c=a(b);b.find(".user-dropdown>strong").click(function(){$(chatline).val($(this).text()+": "+$(chatline).val())});return c}}(window.addUserDropdown);$(".user-dropdown>strong").click(function(){$("#chatline").val($(this).text()+": "+$(chatline).val()).focus()})})},{}],18:[function(n,m,h){window.cytubeEnhanced.addModule("videoControls",
function(b,c){var a=this;c=$.extend({},{turnOffVideoOption:!0,selectQualityOption:!0,expandPlaylistOption:!0,showVideoContributorsOption:!0,playlistHeight:500},c);$("#mediarefresh").hide();this.$topVideoControls=$('<div id="top-video-controls" class="btn-group">').appendTo("#nav-collapsible");this.refreshVideo=function(){$("#mediarefresh").click()};this.$refreshVideoBtn=$('<button id="refresh-video" class="btn btn-sm btn-default" title="'+b.t("video[.]Refresh video")+'">').html('<i class="glyphicon glyphicon-refresh">').appendTo(this.$topVideoControls).on("click",
function(){a.refreshVideo()});this.hidePlayer=function(a){if(a.hasClass("btn-default")){var b=$("#videowrap").find(".embed-responsive");b.css({position:"relative"});$('<div id="player-overlay">').appendTo(b);a.html('<i class="glyphicon glyphicon-film">');a.removeClass("btn-default");a.addClass("btn-success")}else $("#player-overlay").remove(),a.html('<i class="glyphicon glyphicon-ban-circle">'),a.removeClass("btn-success"),a.addClass("btn-default")};this.$hidePlayerBtn=$('<button id="hide-player-btn" class="btn btn-sm btn-default" title="'+
b.t("video[.]Hide video")+'">').html('<i class="glyphicon glyphicon-ban-circle">').appendTo(this.$topVideoControls).on("click",function(){a.hidePlayer($(this))});c.turnOffVideoOption||this.$hidePlayerBtn.hide();this.qualityLabelsTranslate={auto:"ass",240:"240p",360:"360p",480:"480p",720:"720p",1080:"1080p",best:b.t("video[.]best")};var e=["auto",240,360,480,720,1080,"best"];this.$videoQualityBtnGroup=$('<div class="btn-group">').html('<button type="button" class="btn btn-default btn-sm video-dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+
b.t("video[.]Quality")+": "+this.qualityLabelsTranslate[window.USEROPTS.default_quality||"auto"]+' <span class="caret"></span></button>').appendTo(this.$topVideoControls);this.$videoQualityList=$('<ul class="dropdown-menu">');for(var d=0,f=e.length;d<f;d++)$("<li>").html('<a href="#" data-quality="'+e[d]+'">'+this.qualityLabelsTranslate[e[d]]+"</a>").appendTo(this.$videoQualityList);this.$videoQualityList.appendTo(this.$videoQualityBtnGroup);this.changeVideoQuality=function(a){this.settingsFix();
$("#us-default-quality").val(a.data("quality"));window.saveUserOptions();this.$refreshVideoBtn.click();this.$videoQualityBtnGroup.find("button").html(b.t("video[.]Quality")+": "+a.text()+' <span class="caret"></span>');$(".video-dropdown-toggle").dropdown()};this.$videoQualityBtnGroup.on("click","a",function(){a.changeVideoQuality($(this));return!1});$("#us-default-quality").on("change",function(){a.$videoQualityBtnGroup.find("button").html(b.t("video[.]Quality")+": "+a.qualityLabelsTranslate[$(this).val()]+
' <span class="caret"></span>')});c.selectQualityOption||this.$videoQualityBtnGroup.hide();this.settingsFix=function(){$(document.getElementById("us-theme")).val(window.USEROPTS.theme);$(document.getElementById("us-layout")).val(window.USEROPTS.layout);$(document.getElementById("us-no-channelcss")).prop("checked",window.USEROPTS.ignore_channelcss);$(document.getElementById("us-no-channeljs")).prop("checked",window.USEROPTS.ignore_channeljs);$(document.getElementById("us-synch")).prop("checked",window.USEROPTS.synch);
$(document.getElementById("us-synch-accuracy")).val(window.USEROPTS.sync_accuracy);$(document.getElementById("us-wmode-transparent")).prop("checked",window.USEROPTS.wmode_transparent);$(document.getElementById("us-hidevideo")).prop("checked",window.USEROPTS.hidevid);$(document.getElementById("us-playlistbuttons")).prop("checked",window.USEROPTS.qbtn_hide);$(document.getElementById("us-oldbtns")).prop("checked",window.USEROPTS.qbtn_idontlikechange);$(document.getElementById("us-default-quality")).val(window.USEROPTS.default_quality||
"auto");$(document.getElementById("us-chat-timestamp")).prop("checked",window.USEROPTS.show_timestamps);$(document.getElementById("us-sort-rank")).prop("checked",window.USEROPTS.sort_rank);$(document.getElementById("us-sort-afk")).prop("checked",window.USEROPTS.sort_afk);$(document.getElementById("us-blink-title")).val(window.USEROPTS.blink_title);$(document.getElementById("us-ping-sound")).val(window.USEROPTS.boop);$(document.getElementById("us-sendbtn")).prop("checked",window.USEROPTS.chatbtn);
$(document.getElementById("us-no-emotes")).prop("checked",window.USEROPTS.no_emotes);$(document.getElementById("us-modflair")).prop("checked",window.USEROPTS.modhat);$(document.getElementById("us-joinmessage")).prop("checked",window.USEROPTS.joinmessage);$(document.getElementById("us-shadowchat")).prop("checked",window.USEROPTS.show_shadowchat)};this.expandPlaylist=function(a){a.hasClass("btn-success")?($(document.getElementById("queue")).css("max-height",c.playlistHeight+"px"),a.attr("title",b.t("video[.]Expand playlist")),
a.removeClass("btn-success"),a.addClass("btn-default")):($("#queue").css("max-height","100000px"),a.attr("title",b.t("video[.]Unexpand playlist")),a.removeClass("btn-default"),a.addClass("btn-success"),window.scrollQueue())};this.$expandPlaylistBtn=$('<button id="expand-playlist-btn" class="btn btn-sm btn-default" data-expanded="0" title="'+b.t("video[.]Expand playlist")+'">').append('<span class="glyphicon glyphicon-resize-full">').prependTo("#videocontrols").on("click",function(){a.expandPlaylist($(this))});
c.expandPlaylistOption||this.$expandPlaylistBtn.hide();this.$scrollToCurrentBtn=$('<button id="scroll-to-current-btn" class="btn btn-sm btn-default" title="'+b.t("video[.]Scroll the playlist to the current video")+'">').append('<span class="glyphicon glyphicon-hand-right">').prependTo("#videocontrols").on("click",function(){window.scrollQueue()});this.showVideoContributorsList=function(){var a=$("<div>"),c={};$("#queue .queue_entry").each(function(){var a=$(this).attr("title").replace("Added by: ",
"");c[a]=void 0===c[a]?1:c[a]+1});a.append($("<p>"+b.t("video[.]Video's count")+": "+($("#queue .queue_entry").length+1)+"</p>"));var d=$("<ol>"),e;for(e in c)c.hasOwnProperty(e)&&d.append($("<li>"+e+": "+c[e]+".</li>"));d.appendTo(a);b.getModule("utils").done(function(c){c.createModalWindow(b.t("video[.]Contributors' list"),a)})};this.$videoContributorsBtn=$('<button id="video-contributors-btn" class="btn btn-sm btn-default" title="'+b.t("video[.]Contributors' list")+'">').append('<span class="glyphicon glyphicon-user">').prependTo("#videocontrols").on("click",
function(){a.showVideoContributorsList()});c.showVideoContributorsOption||this.$videoContributorsBtn.hide()})},{}],19:[function(n,m,h){window.cytubeEnhanced.addModule("videojsProgress",function(){var b=this;this.$Pre=$("#ytapiplayer_html5_api").attr("preload","false");this.handleProgress=function(){if(window.PLAYER instanceof window.VideoJSPlayer&&("Html5"===window.PLAYER.player.techName||"Html5"===window.PLAYER.player.Ua)){var b=$('<div class="vjs-tip">').insertAfter(".vjs-progress-control"),a=$('<div class="vjs-tip-body">').appendTo(b);
$('<div class="vjs-tip-body-arrow">').appendTo(a);var e=$('<div class="vjs-tip-body-inner">').appendTo(a);$(".vjs-progress-control").on("mousemove",function(a){var c=$(window.PLAYER.player.controlBar.progressControl.seekBar.el()),d=c.outerWidth()/window.PLAYER.player.duration(),g=(a.pageX-c.offset().left)/d;c=Math.floor(g/3600);d=0<c?Math.floor(g%3600/60):Math.floor(g/60);10>d&&0<c&&(d="0"+d);g=Math.floor(g%60);10>g&&(g="0"+g);0<c?e.text(c+":"+d+":"+g):e.text(d+":"+g);b.css("top",-($(".vjs-control-bar").height()+
$(".vjs-progress-control").height())+"px").css("left",a.pageX-$(".vjs-control-bar").offset().left-e.outerWidth()/2+"px").show()});$(".vjs-progress-control, .vjs-play-control").on("mouseout",function(){b.hide()})}};this.handleProgress();window.socket.on("changeMedia",function(){b.handleProgress()})});$("#messagebuffer").before("<div class='menu2bar'></div>");$(".menu2bar").append($("#afk-btn"));$(".menu2bar").append($("#clear-chat-btn"));$(".menu2bar").append($("#pm-history-btn"));videojs("ytapiplayer_html5_api").ready(function(){this.volume(1)})},
{}]},{},[4,3,5,7,16,19]);