/*
 * |  Audio File Library for CyTube Scripts
* |  Written by Xaekai
* |
* @preserve
 * |  CyTube Virtual Whispers and User Join/Leave messages for Everybody
* |  Written by Xaekai
* |  Copyright 2013-2015
* |  
* @preserve
 * |  Cytube Playlist Time
* |  Written by Spoon
* @preserve
 /*!
* |  CyTube Simplied Leader
* |  Written by Xaekai
* |
* @preserve
 /*!
* |  CyTube Audio Notifications System
* |  Copyright 2013-2015 Xaekai
* |
* @preserve
 * |  testing some shit
* |  by bill but lazy 2 github
* |
* @preserve
 * |  CyTube Extra Volume Controls
* |  Written by Xaekai
* |  Copyright 2014-2016
* |
* @preserve

$(".navbar-nav").before($("#videocontrols"));
$("[id^=volumeButton]").remove();(function(){var volumeButtonUp=$("<button/>").prop("id","volumeButtonUp").addClass("btn btn-default btn-sm").attr("type","button").attr("title","Volume Up").html("<span class='glyphicon glyphicon-volume-up'></span>").on("click",function(){PLAYER.getVolume(function(currentVolume){var newVolume=Math.min(1,Math.max(0,Math.round((currentVolume+(currentVolume>=.1?currentVolume>=.2?.05:.02:.01))/.01)*.01)).toFixed(2);PLAYER.setVolume(newVolume);$("#volumeButtonIndicator").html(newVolume);console.info("Setting player volume",newVolume)})}).prependTo("#videocontrols");var volumeButtonIndicator=$("<button/>").prop("id","volumeButtonIndicator").addClass("btn lel btn-sm").attr("type","button").attr("title","Volume Indicator / Mute").html("???").on("click",function(){if($(this).data()["mutedState"]){PLAYER.setVolume($(this).data()["preMutedVolume"]);$(this).data()["mutedState"]=false;$(this).toggleClass("btn-success btn-warning")}else{PLAYER.getVolume(function(currentVolume){console.info("Muting player. Restore Volume:",currentVolume);$("#volumeButtonIndicator").data()["preMutedVolume"]=currentVolume;$("#volumeButtonIndicator").data()["mutedState"]=true;$("#volumeButtonIndicator").toggleClass("btn-success btn-warning");PLAYER.setVolume(0)})}}).data("mutedState",false).prependTo("#videocontrols");var volumeButtonDown=$("<button/>").prop("id","volumeButtonDown").addClass("btn btn-default btn-sm").attr("type","button").attr("title","Volume Down").html("<span class='glyphicon glyphicon-volume-down'></span>").on("click",function(){PLAYER.getVolume(function(currentVolume){var newVolume=Math.min(1,Math.max(0,Math.round((currentVolume-(currentVolume<=.2?currentVolume<=.1?.01:.02:.05))/.01)*.01)).toFixed(2);PLAYER.setVolume(newVolume);$("#volumeButtonIndicator").html(newVolume);console.info("Setting player volume",newVolume)})}).prependTo("#videocontrols");if(CLIENT.rank>=CHANNEL.perms.seeplaylist&&$("#queue .queue_entry").length){PLAYER.getVolume(function(currentVolume){$("#volumeButtonIndicator").html(currentVolume.toFixed(2))})}if(!CLIENT.volumeListener){CLIENT.volumeListener=true;setInterval(function(){PLAYER.getVolume(function(currentVolume){$("#volumeButtonIndicator").html(currentVolume.toFixed(2))})},3333);socket.on("changeMedia",function(){setTimeout(function(){PLAYER.getVolume(function(currentVolume){$("#volumeButtonIndicator").html(currentVolume.toFixed(2))})},250)})}})();
*/
this[CHANNEL.name].audioLibrary||(this[CHANNEL.name].audioLibrary={});
this[CHANNEL.name].audioLibrary.sounds={airhorn:{url:"//resources.pink.horse/sounds/airhorn.mp3",emote:!0,squee:!0},blop:{url:"//resources.pink.horse/sounds/blop.ogg",emote:!1,squee:!0},damnson:{url:"//resources.pink.horse/sounds/damnson.ogg",emote:!0,squee:!0},dog1:{url:"//resources.pink.horse/sounds/dog1.ogg",emote:!0,squee:!0},fairywand:{url:"//resources.pink.horse/sounds/fairy_wand.ogg",emote:!1,squee:!0},hankhill:{url:"//resources.pink.horse/sounds/hankhill.ogg",emote:!0,squee:!0},hitmarker:{url:"//resources.pink.horse/sounds/hitmarker.mp3",
emote:!0,squee:!1},mcguirk:{url:"//resources.pink.horse/sounds/mcguirk.ogg",emote:!0,squee:!0},nigga:{url:"//resources.pink.horse/sounds/coming_for_you.ogg",emote:!0,squee:!0},present:{url:"//resources.pink.horse/sounds/present4ya.ogg",emote:!0,squee:!0},raininside:{url:"//resources.pink.horse/sounds/rain_inside.ogg",emote:!1,squee:!1},smokeweed:{url:"//resources.pink.horse/sounds/smokeweed.ogg",emote:!0,squee:!0},votingpoll:{url:"//resources.pink.horse/sounds/votingpoll.ogg",emote:!0,squee:!0},squee:{url:"//resources.pink.horse/sounds/squee.ogg",
emote:!0,squee:!0},squish:{url:"//resources.pink.horse/sounds/squish.ogg",emote:!0,squee:!0},uhoh:{url:"//resources.pink.horse/sounds/uhoh.ogg",emote:!0,squee:!0},wahaha:{url:"//github.com/panzi/Browser-Ponies/raw/gh-pages/ponies/rarity/wahahaha.ogg",emote:!0,squee:!0},ut_mousehole:{url:"//resources.pink.horse/sounds/undertale_mousehole.ogg",emote:!0,squee:!0}};
this[CHANNEL.name].audioLibrary.squees=function(){for(var a=Object.keys(this[CHANNEL.name].audioLibrary.sounds),c={},b=a.length-1;0<=b;b--){var d=this[CHANNEL.name].audioLibrary.sounds[a[b]];d.squee&&(c[a[b]]=d.url)}return c}();this[CHANNEL.name].audioLibrary.emotes=function(){for(var a=Object.keys(this[CHANNEL.name].audioLibrary.sounds),c={},b=a.length-1;0<=b;b--){var d=this[CHANNEL.name].audioLibrary.sounds[a[b]];d.emote&&(c[a[b]]=new Audio(d.url))}return c}();
$("#customSettingsStaging").length||$("<div/>").prop("id","customSettingsStaging").prop("class","row section").hide().insertAfter("#motdrow");$("#customSettingsModal").length&&($("#customSettingsWrap .customSettings").detach().appendTo($("#customSettingsStaging")),$("#customSettingsModal").remove());$("#customSettingsModalTrigger").length&&$("#customSettingsModalTrigger").unbind().remove();
function createModal(a){var c=a.title||"Empty Modal",b=!!a.titleIsMarkup,d=$("<div/>").addClass("modal fade").attr("tabindex","-1"),e=$("<div/>").addClass("modal-dialog").appendTo(d);e=$("<div/>").addClass("modal-content").appendTo(e);var f=$("<div/>").addClass("modal-header").appendTo(e),h=$("<div/>").addClass("modal-body").appendTo(e),g=$("<div/>").addClass("modal-footer");$("<button/>").addClass("close").attr("data-dismiss","modal").attr("data-hidden","true").html("&times;").appendTo(f);$("<button/>").addClass("btn btn-default").attr("data-dismiss",
"modal").prop("type","button").html("Close").appendTo(g);b?$("<h4/>").addClass("modal-title").html(c).appendTo(f):$("<h4/>").addClass("modal-title").text(c).appendTo(f);a.wrap_id&&d.prop("id",a.wrap_id);a.body_id&&h.prop("id",a.body_id);a.footer&&g.appendTo(e);if(a.destroy)d.on("hidden.bs.modal",function(){d.remove()});a.attach&&d.appendTo(a.attach);return d}
$("<button/>").prop("id","customSettingsModalTrigger").attr("title","Channel Control").addClass("btn btn-sm btn-default").html('<span class="glyphicon glyphicon-tasks"></span> Channel Control').button().appendTo("#customSettingsStaging").attr("data-toggle","modal").click(function(a){createModal({title:"Personal Channel Settings: "+CHANNEL.name,wrap_id:"customSettingsModal",body_id:"customSettingsWrap",footer:!0}).on("show.bs.modal",function(a){$("#customSettingsStaging .customSettings").each(function(){var a=
$("<div/>").addClass("panel panel-primary"),c=$("<div/>").addClass("panel-heading").appendTo(a),e=$("<div/>").addClass("panel-body").appendTo(a);a.appendTo($("#customSettingsWrap"));c.text($(this).data().title);$(this).detach().appendTo(e)})}).on("hidden.bs.modal",function(a){$("#customSettingsWrap .customSettings").detach().appendTo($("#customSettingsStaging"));$("#customSettingsModal").remove()}).insertAfter("#useroptions").modal()});
USEROPTS.layout.match(/synchtube/)?$("#customSettingsModalTrigger").detach().appendTo("#leftcontrols"):$("#customSettingsModalTrigger").detach().prependTo("#leftcontrols");$("#morebtn").after('<button id="Notif" title="Sound Notifications" class="btn btn-sm btn-default headbtn headbtnleft"><span class="glyphicon glyphicon-bell"></span></button>');$("#Notif").click(function(){$(this).toggleClass("active");$("#customSettingsStaging").toggleClass("show")});
HTMLCollection.prototype.each=Array.prototype.each=NodeList.prototype.each=function(a,c){for(var b=-1,d=void 0===c;++b<this.length;)d&&(c=this[b]),a.bind(c)(this[b],b,this)};document.body.insertAdjacentHTML("beforeEnd","<style>#queue li:hover .qe_time:before { content: attr(data-timeleft); }</style>");var _mQE=window.makeQueueEntry;window.makeQueueEntry=function(a,c){var b=_mQE(a,c);b[0].dataset.seconds=a.media.seconds;return b};
function calculateRemainingTime(){function a(a){a=Number(a);var b=Math.floor(a/3600),c=Math.floor(a%3600/60);a=Math.floor(a%3600%60);return(0<b?b+":"+(10>c?"0":""):"")+c+":"+(10>a?"0":"")+a}var c=document.querySelectorAll("#queue li"),b=document.querySelector("#plmeta"),d,e=[],f=0,h=b&&"playtime"in b.dataset&&0<=b.dataset.playtime?b.dataset.playtime:0;0!=c.length&&(c.each(function(){this.querySelector(".qe_time")&&(d?(this.querySelector(".qe_time").dataset.timeleft="Time till: "+a(f)+" | ",f+=parseInt(this.dataset.seconds)):
this.classList.contains("queue_active")?(d=this,f+=parseInt(this.dataset.seconds)-h,this.querySelector(".qe_time").dataset.timeleft="Time left: "+a(f)+" | "):e.push(this))}),e.each(function(){this.querySelector(".qe_time").dataset.timeleft="Time till: "+a(f)+" | ";f+=parseInt(this.dataset.seconds)}))}socket.on("mediaUpdate",function(a){var c=document.querySelector("#plmeta");!c||c.dataset.playtime&&a.paused||(c.dataset.playtime=Math.abs(Math.ceil(a.currentTime)));a.paused||calculateRemainingTime()});
socket.emit("requestPlaylist");
(function(){!$("#leader").length&&CLIENT.rank>=CHANNEL.perms.leaderctl&&($("<button>").prop("id","leader").attr("title","Control current time of media").addClass("btn btn-sm btn-default headbtn headbtnleft").append($("<span>").addClass("glyphicon glyphicon-transfer")).insertAfter($("#morebtn")).on("click",function(){CLIENT.leader?socket.emit("assignLeader",{name:""}):socket.emit("assignLeader",{name:CLIENT.name})}),socket.on("setLeader",function(a){a===CLIENT.name?$("#leader").removeClass("btn-default").addClass("btn-warning"):$("#leader").addClass("btn-default").removeClass("btn-warning")}));
var a=Math.min(CHANNEL.perms.oplaylistdelete,CHANNEL.perms.oplaylistjump,CHANNEL.perms.oplaylistnext,CHANNEL.perms.playlistdelete,CHANNEL.perms.playlistjump,CHANNEL.perms.playlistnext);!$("#shrinkplaylist").length&&CLIENT.rank>=a&&($("#queue").data().shrink=!1,$("<button>").prop("id","shrinkplaylist").attr("title","Toggle playlist collapse").addClass("btn btn-sm btn-default").append($("<span>").addClass("glyphicon glyphicon-compressed")).insertAfter($("#shuffleplaylist")).on("click",function(){$("#queue").data().shrink?
($("#queue").data().shrink=!1,$("#playlistStyle").remove()):($("#queue").data().shrink=!0,$("head").append($("<style>").prop("id","playlistStyle").text("#queue div.btn-group { display: none!important; }")));$(this).toggleClass("btn-default btn-warning")}))})();window[CHANNEL.name]||(window[CHANNEL.name]={});$("#customSettingsStaging").length||$("<div/>").prop("id","customSettingsStaging").hide().insertAfter("#useroptions");
window[CHANNEL.name].audioNotice||(window[CHANNEL.name].audioNotice={},window[CHANNEL.name].audioNotice.Squee={timeSinceLast:0},window[CHANNEL.name].audioNotice.Poll={timeSinceLast:0},window[CHANNEL.name].audioNotice.Priv={timeSinceLast:0},window[CHANNEL.name].audioNotice.Video={timeSinceLast:0});window[CHANNEL.name].audioNotice.typeNames={Squee:"Username",Poll:"Poll",Priv:"Private Message",Video:"Queued Video"};
window[CHANNEL.name].audioNotice.pushNoticeChange=function(a){var c=a.type;var b=a.id;a=a.silent;window[CHANNEL.name].audioNotice[c].id=b;window[CHANNEL.name].audioNotice[c].file=window[CHANNEL.name].audioNotice.choices[b];localStorage[CHANNEL.name+"_AudioNotice"+c+"ID"]=b;$("#AudioNotice"+this.typeNames[c].split(" ")[0]).remove();window[CHANNEL.name].audioNotice[c].audio=$("<audio>").prop("id","AudioNotice"+this.typeNames[c].split(" ")[0]).appendTo("body").attr("preload","auto").prop("volume",window[CHANNEL.name].audioNotice[c].volume).append($("<source>").attr("src",
window[CHANNEL.name].audioNotice[c].file).attr("type","audio/ogg"));a||(window[CHANNEL.name].audioNotice[c].audio[0].play(),$("div.chat-msg-\\\\\\$server\\\\\\$:contains("+this.typeNames[c]+" Notification)").remove())};
window[CHANNEL.name].audioNotice.pushVolume=function(a){var c=a.type;a=a.volume;if("up"==a)a=(100*window[CHANNEL.name].audioNotice[c].volume+5)/100;else if("down"==a)a=(100*window[CHANNEL.name].audioNotice[c].volume-5)/100;else return console.error("ERROR: AudioNotice System: Volume must be 'up' or 'down'");a=Math.min(Math.max(a,.05),1)||.6;window[CHANNEL.name].audioNotice[c].volume=a;localStorage[CHANNEL.name+"_AudioNotice"+c+"Volume"]=Math.floor(100*a);window[CHANNEL.name].audioNotice[c].audio.prop("volume",
a)[0].play();window[CHANNEL.name].audioNotice[c].indicator&&window[CHANNEL.name].audioNotice[c].indicator.html(Math.floor(100*a))};
window[CHANNEL.name].audioNotice.toggle=function(a){window[CHANNEL.name].audioNotice[a].toggleState=!window[CHANNEL.name].audioNotice[a].toggleState;localStorage[CHANNEL.name+"_AudioNotice"+a+"Toggle"]=+window[CHANNEL.name].audioNotice[a].toggleState;window[CHANNEL.name].audioNotice[a].toggleButton&&window[CHANNEL.name].audioNotice[a].toggleButton.toggleClass("label-default label-info");window[CHANNEL.name].audioNotice[a].panel.toggleClass("btn-danger btn-success")};
window[CHANNEL.name].audioNotice.handler={Squee:function(a){window[CHANNEL.name].audioNotice.Squee.toggleState&&(a=$(".nick-highlight:not( .parsed )"),a.length&&(a.addClass("parsed"),window[CHANNEL.name].audioNotice.Squee.audio[0].play(),window[CHANNEL.name].audioNotice.Squee.timeSinceLast=Date.now()))},Poll:function(a){!window[CHANNEL.name].audioNotice.Poll.toggleState||CLIENT.rank<CHANNEL.perms.pollvote||(window[CHANNEL.name].audioNotice.Poll.audio[0].play(),window[CHANNEL.name].audioNotice.Poll.timeSinceLast=
Date.now())},Priv:function(a){window[CHANNEL.name].audioNotice.Priv.toggleState&&a.username!=CLIENT.name&&!$(document.activeElement).hasClass("pm-input")&&(window[CHANNEL.name].audioNotice.Priv.audio[0].play(),window[CHANNEL.name].audioNotice.Priv.timeSinceLast=Date.now(),$("div.chat-msg-\\\\\\$server\\\\\\$:contains(Private Message Notification)").remove())},Video:function(a){!window[CHANNEL.name].audioNotice.Video.toggleState||CLIENT.rank<CHANNEL.perms.seeplaylist||(window[CHANNEL.name].audioNotice.Video.last=
!1)}};
(function(){if(!window[CHANNEL.name].audioNotice.initialized){window[CHANNEL.name].audioNotice.initialized=!0;window[CHANNEL.name].audioNotice.Squee.toggleState=!0;window[CHANNEL.name].audioNotice.Poll.toggleState=!0;window[CHANNEL.name].audioNotice.Priv.toggleState=!0;window[CHANNEL.name].audioNotice.Video.toggleState=!0;window[CHANNEL.name].audioNotice.Squee.id="squee";window[CHANNEL.name].audioNotice.Poll.id="votingpoll";window[CHANNEL.name].audioNotice.Priv.id="uhoh";window[CHANNEL.name].audioNotice.Video.id="fairywand";
window[CHANNEL.name].audioNotice.Squee.volume=.6;window[CHANNEL.name].audioNotice.Poll.volume=.3;window[CHANNEL.name].audioNotice.Priv.volume=.35;window[CHANNEL.name].audioNotice.Video.volume=.35;window[CHANNEL.name].audioNotice.choices=window[CHANNEL.name].audioLibrary?window[CHANNEL.name].audioLibrary.squees:{squee:"//resources.pink.horse/sounds/squee.ogg",votingpoll:"//resources.pink.horse/sounds/votingpoll.ogg",uhoh:"//resources.pink.horse/sounds/uhoh.ogg",fairywand:"//resources.pink.horse/sounds/fairy_wand.ogg"};
if(window[CHANNEL.name]&&window[CHANNEL.name].modulesOptions&&window[CHANNEL.name].modulesOptions.audioNotice){for(var a=Object.keys(window[CHANNEL.name].modulesOptions.audioNotice.choices),c=Object.keys(window[CHANNEL.name].modulesOptions.audioNotice.notices),b=a.length-1;0<=b;b--)window[CHANNEL.name].audioNotice.choices[a[b]]=window[CHANNEL.name].modulesOptions.audioNotice.choices[a[b]];for(b=c.length-1;0<=b;b--)window[CHANNEL.name].audioNotice[c[b]].id=window[CHANNEL.name].modulesOptions.audioNotice.notices[c[b]]}a=
Object.keys(window[CHANNEL.name].audioNotice.typeNames);if("undefined"!==typeof Storage)for(b=a.length-1;0<=b;b--)void 0!=localStorage[CHANNEL.name+"_AudioNotice"+a[b]+"Toggle"]&&(window[CHANNEL.name].audioNotice[a[b]].toggleState=parseInt(localStorage[CHANNEL.name+"_AudioNotice"+a[b]+"Toggle"])),void 0!=localStorage[CHANNEL.name+"_AudioNotice"+a[b]+"ID"]&&(window[CHANNEL.name].audioNotice[a[b]].id=localStorage[CHANNEL.name+"_AudioNotice"+a[b]+"ID"]),void 0!=localStorage[CHANNEL.name+"_AudioNotice"+
a[b]+"Volume"]&&(window[CHANNEL.name].audioNotice[a[b]].volume=parseInt(localStorage[CHANNEL.name+"_AudioNotice"+a[b]+"Volume"])/100||.6),window[CHANNEL.name].audioNotice.pushNoticeChange({type:a[b],id:window[CHANNEL.name].audioNotice[a[b]].id,silent:!0});else console.log("ERROR: AudioNotice System: Local storage not supported by this browser.");window[CHANNEL.name].audioNotice.Squee.toggleButton=$("<span/>").html("").prop("id","AudioNoticeSqueeToggle").attr("title","Toggle Username Audio Notices").addClass("pointer fa fa-bell").click(function(){window[CHANNEL.name].audioNotice.toggle("Squee")}).appendTo($("#chatwrap"));
window[CHANNEL.name].audioNotice.Squee.toggleState||window[CHANNEL.name].audioNotice.Squee.toggleButton.removeClass("label-info").addClass("");socket.on("chatMsg",function(a){return window[CHANNEL.name].audioNotice.handler.Squee(a)});socket.on("newPoll",function(a){return window[CHANNEL.name].audioNotice.handler.Poll(a)});socket.on("pm",function(a){return window[CHANNEL.name].audioNotice.handler.Priv(a)});socket.on("changeMedia",function(a){return window[CHANNEL.name].audioNotice.handler.Video(a)});
console.log("INFO: AudioNotice System Initialized");window[CHANNEL.name].audioNotice.controls=$('<div id="AudioNoticeControls" class="customSettings" data-title="Audio Notifications Settings"/>').appendTo("#customSettingsStaging");for(b=0;b<a.length;b++){var d=a[b];(function(){var a=$("<form>").prop("action","javascript:void(0)").addClass("form-horizontal"),b=$("<div>").addClass("form-group").prop("id","AudioNoticeControls"+d).appendTo(a);window[CHANNEL.name].audioNotice.controls.append(a);$("<span>").addClass("label label-info col-sm-2").text(window[CHANNEL.name].audioNotice.typeNames[d]+
" Notice").appendTo(b);a=$("<div>").addClass("btn-group col-sm-4").attr("data-control",d).appendTo(b);b=$("<button/>").prop("id","AudioNoticeControls"+d+"Toggle").addClass("btn btn-sm btn-success").attr("title","Toggle "+window[CHANNEL.name].audioNotice.typeNames[d]+" Notices").html('<span class="glyphicon glyphicon-bell"></span>').click(function(){window[CHANNEL.name].audioNotice.toggle($(this).parent().data().control)}).prependTo(a);window[CHANNEL.name].audioNotice[d].panel=b;window[CHANNEL.name].audioNotice[d].toggleState||
b.toggleClass("btn-success btn-danger");b=$("<div/>").addClass("btn-group").prop("id","AudioNoticeControls"+d+"Sounds").appendTo(a);$("<button/>").prop("id","AudioNoticeControls"+d+"VolumeDown").addClass("btn btn-sm btn-default").attr("title",window[CHANNEL.name].audioNotice.typeNames[d]+" Volume Down").click(function(){window[CHANNEL.name].audioNotice.pushVolume({type:$(this).parent().data().control,volume:"down"})}).html('<span class="glyphicon glyphicon-volume-down"></span>').appendTo(a);window[CHANNEL.name].audioNotice[d].indicator=
$("<button/>").prop("id","AudioNoticeControls"+d+"Indicator").addClass("btn btn-sm btn-default").attr("title",window[CHANNEL.name].audioNotice.typeNames[d]+" Volume").html(100*window[CHANNEL.name].audioNotice[d].volume).appendTo(a);$("<button/>").prop("id","AudioNoticeControls"+d+"VolumeUp").addClass("btn btn-sm btn-default").attr("title",window[CHANNEL.name].audioNotice.typeNames[d]+" Volume Up").click(function(){window[CHANNEL.name].audioNotice.pushVolume({type:$(this).parent().data().control,volume:"up"})}).html('<span class="glyphicon glyphicon-volume-up"></span>').appendTo(a);
$("<button/>").prop("id","AudioNoticeControls"+d+"Play").addClass("btn btn-sm btn-default").attr("title","Play Notification").click(function(){window[CHANNEL.name].audioNotice[$(this).parent().data().control].audio[0].play()}).html('<span class="glyphicon glyphicon-play"></span>').appendTo(a);$("<button/>").addClass("btn btn-default btn-sm dropdown-toggle").attr("type","button").attr("href","javascript:void(0)").attr("data-toggle","dropdown").html("<span class='glyphicon glyphicon-music'></span> Sound <span class='caret'></span>").appendTo(b);
a=$("<ul/>").addClass("dropdown-menu").addClass("columns").attr("role","menu").appendTo(b);b=Object.keys(window[CHANNEL.name].audioNotice.choices);for(var c=0;c<b.length;c++){key=b[c];var g=$("<li/>").appendTo(a);(function(a){$("<a/>").text(key).attr("href","javascript:void(0)").attr("data-notice",key).attr("data-type",d).click(function(){console.log($(this).data().type,$(this).data().notice);window[CHANNEL.name].audioNotice.pushNoticeChange({type:$(this).data().type,id:$(this).data().notice,silent:!1})}).appendTo(g)})(c)}})()}}})();
"undefined"==typeof _addChatMessage&&(_addChatMessage=addChatMessage,addChatMessage=function(a){username=a.username;msg=a.msg;"bill"==a.username&&(match=a.msg.match(/^\((\S+)\) (.*)/))&&(a.username=match[1]+"*",a.msg=match[2]);0==Math.floor(1*Math.random())&&scrollChat();_addChatMessage(a);a.username=username;a.msg=msg});